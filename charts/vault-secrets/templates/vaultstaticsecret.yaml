{{- range .Values.vaultStaticSecrets }}
{{- if .enabled }}
---
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: {{ .name }}
  namespace: {{ .namespace | default (include "vault-secrets.namespace" $) }}
  labels:
    {{- include "vault-secrets.labels" $ | nindent 4 }}
    {{- if .labels }}
    {{- toYaml .labels | nindent 4 }}
    {{- end }}
  {{- if .annotations }}
  annotations:
    {{- toYaml .annotations | nindent 4 }}
  {{- end }}
spec:
  vaultAuthRef: {{ .vaultAuthRef }}
  mount: {{ .mount }}
  type: {{ .type | default "kv-v2" }}
  path: {{ .path }}
  {{- if .version }}
  version: {{ .version }}
  {{- end }}
  {{- if .refreshAfter }}
  refreshAfter: {{ .refreshAfter }}
  {{- end }}
  {{- if .hmacSecretData }}
  hmacSecretData: {{ .hmacSecretData }}
  {{- end }}
  {{- if .rolloutRestartTargets }}
  rolloutRestartTargets:
    {{- toYaml .rolloutRestartTargets | nindent 4 }}
  {{- end }}
  destination:
    name: {{ .destination.name }}
    create: {{ .destination.create | default true }}
    {{- if .destination.labels }}
    labels:
      {{- toYaml .destination.labels | nindent 6 }}
    {{- end }}
    {{- if .destination.annotations }}
    annotations:
      {{- toYaml .destination.annotations | nindent 6 }}
    {{- end }}
    {{- if .destination.type }}
    type: {{ .destination.type }}
    {{- end }}
    {{- if .destination.transformation }}
    transformation:
      {{- toYaml .destination.transformation | nindent 6 }}
    {{- end }}
{{- end }}
{{- end }}

# Made with Bob
