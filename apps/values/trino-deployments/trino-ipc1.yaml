# Trino instance configuration for trino-ipc1
trinoDeployment:
  name: trino-ipc1
  description: Trino instance trino-ipc1

# Kubernetes cluster where this instance will be deployed
# Use the cluster name as registered in ArgoCD
cluster:
  name: ipc-cluster-1

# Git repository configuration
git:
  repoURL: https://github.com/your-org/your-repo.git
  targetRevision: main

# AppProject configuration
appProject:
  name: trino-ipc1
  description: AppProject for Trino instance trino-ipc1
  sourceRepos:
    - '*'
  destinations:
    - namespace: trino-ipc1
      name: ipc-cluster-1
    - namespace: vault
      name: ipc-cluster-1
  clusterResourceWhitelist:
    - group: '*'
      kind: '*'
  namespaceResourceWhitelist:
    - group: '*'
      kind: '*'
  orphanedResources:
    warn: true

# Application configurations
applications:
  trino:
    enabled: true
    namespace: trino-ipc1
    chart:
      path: charts/trino/trino-1.41.0.tgz
    valuesFile: apps/values/trino/trino-ipc1-values.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
        allowEmpty: false
      syncOptions:
        - CreateNamespace=true
        - ServerSideApply=true
      retry:
        limit: 5
        backoff:
          duration: 5s
          factor: 2
          maxDuration: 3m

  vault:
    enabled: true
    namespace: vault
    chart:
      repoURL: https://helm.releases.hashicorp.com
      name: vault
      version: 0.28.0
    valuesFile: apps/values/vault/trino-ipc1-values.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
        allowEmpty: false
      syncOptions:
        - CreateNamespace=true
        - ServerSideApply=true
      retry:
        limit: 5
        backoff:
          duration: 5s
          factor: 2
          maxDuration: 3m
    ignoreDifferences:
      - group: admissionregistration.k8s.io
        kind: MutatingWebhookConfiguration
        jqPathExpressions:
          - '.webhooks[]?.clientConfig.caBundle'

  vaultSecrets:
    enabled: true
    valuesFile: apps/values/vault-secrets/trino-ipc1-values.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
        allowEmpty: false
      syncOptions:
        - CreateNamespace=true
        - ServerSideApply=true
      retry:
        limit: 5
        backoff:
          duration: 5s
          factor: 2
          maxDuration: 3m

# Made with Bob
